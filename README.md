##### Для запуска генераторов необходим Python 3.0 или выше.

# IOMMUGenerator
Генератор массива для инициализации IOMMU(RISC-V). 

Для расчета значений таблицы генератору необходимы: разрядность физического адреса в iommu (для расчета смещений),
разрядность физического адреса устройства (по нему строится диапазон адресного пространства) и базовый адрес таблицы, 
кратный 4KB (0x1000).
(Можно добавить секцию в *.xl, например: 

      . = 0xcbff8000;        
      .iommu_table :
      {
        _iommu_table = .;
      }  
). После генерации базовый адрес таблицы необходимо передать в функцию init_mmu_from_table 
(драйвер IOMMU, см sample in service_subs). Чтобы не генерировать таблицу для unmapped сегмента, 
необходимо его задать (см. -u флаг).

Пример запуска генератора:
 
     python3 iommu_gen.py
     
Дополнительные флаги:

    [-c, --config_path ] - путь и название таблицы                           (str, default="config.csv")
    [-r, --cpp_res_path] - путь и название файла для записи результата       (str, default="iommu_table.cpp")
    [-p, --page_size   ] - размер страницы из списка [512GB, 1GB, 2MB, 4KB]  (str, default="2MB")
    [-u, --unmap_seg   ] - базовый адрес для iommu table                     (int, default=0xcbff8000)
    [-b, --table_addr  ] - unmapped сегмент - start_address:end_address      (str, default="0:0")
    [    --pa_power    ] - разрядность физического адреса устройства в битах (int, default=32)
    [    --iommu_power ] - разрядность физического адреса в iommu в битах    (int, default=40)
    [    --noelv_mode  ] - дополнение* к оригинальному (RISC-V) iommu        (True if active)
    
Пример:

     python3 iommu_gen.py -c "test/my_config1.csv" -p 4KB -b 0xcbff8000 

\* pa.ppn[i−1 : 0] = va.vpn[i−1 : 0] + pte.ppn[i−1 : 0], i = index_of_leaf_PTE, 
данное дополнение позволяет отображать виртуальный адрес в физический 
со смещением кратным 4KB (0x1000)
        
----------  
# TlbMipsGenerator
Генератор для конфигурации и инициализации mips TLB.

Генератор заполняет ассемблерный файл с шаблоном, содержащим TLB refill обработчик 
(работающий по принципу прямого отображения), секцию инициализации TLB и регистра Wired 
(по умолчанию кол-во закрепленных строк в TLB = 8), данными из таблицы.
Таблица может содержать неограниченное количество записей, но только первые 16
записей попадут в последовательность инициализации. Выражения в таблице,
находящиеся в скобках, а также одиночный символ _ игнорируются.

Пример запуска генератора:
 
     python3 tlb_gen.py

Дополнительные флаги:
   
     [-c, --config_path  ] - путь и название таблицы                        (str, default="config.csv")
     [-t, --template_path] - путь и название ассемблерного файла с шаблоном (str, default="asm_template.s")
     [-r, --asm_res_path ] - путь и название файла для записи результата    (str, default="asm.s")
     [-p, --page_size    ] - размер tlb страницы в килобайтах**             (int, default=16384)
     [-w, --wired        ] - количество закрепленных строк в TLB для tlbwr  (int, default=8)
        ** [4KB, 16KB, 64KB, 256KB, 1MB, 4MB, 16MB]

Пример:

     python3 tlb_gen.py -c "test/my_config1.csv" -p 4 -w 7